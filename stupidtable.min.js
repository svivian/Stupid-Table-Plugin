(function(a){a.fn.stupidtable=function(g){return this.each(function(){var d=a(this);g=g||{};g=a.extend({},{"int":function(a,b){return parseInt(a,10)-parseInt(b,10)},"float":function(a,b){return parseFloat(a)-parseFloat(b)},string:function(a,b){return a<b?-1:a>b?1:0}},g);d.on("click","th",function(){var m=d.children("tbody").children("tr"),b=a(this),h=0,n=a.fn.stupidtable.dir;d.find("th").slice(0,b.index()).each(function(){var b=a(this).attr("colspan")||1;h+=parseInt(b,10)});var p=b.data("sort")||
null;if(null!==p){var j=b.data("sort-dir")===n.ASC?n.DESC:n.ASC;d.trigger("beforetablesort",{column:h,direction:j});d.css("display");setTimeout(function(){var l=[],c=g[p];m.each(function(b,d){var c=a(d).children().eq(h),e=c.data("sort-value"),c="undefined"!==typeof e?e:c.text();l.push(c)});var k=l.slice(0).sort(c);j===a.fn.stupidtable.dir.DESC&&k.reverse();for(var c=[],f=0,e=0;e<l.length;e++){for(f=a.inArray(l[e],k);-1!=a.inArray(f,c);)f++;c.push(f)}d.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");
b.data("sort-dir",j).addClass("sorting-"+j);k=m.slice(0);for(e=f=0;e<c.length;e++)f=c[e],k[f]=m[e];c=a(k);d.children("tbody").append(c);d.trigger("aftertablesort",{column:h,direction:j});d.css("display")},10)}})})};a.fn.stupidtable.dir={ASC:"asc",DESC:"desc"}})(jQuery);