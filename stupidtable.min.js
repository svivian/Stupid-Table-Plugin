(function(a){a.fn.stupidtable=function(j){return this.each(function(){var d=a(this);j=j||{};j=a.extend({},{"int":function(a,b){return parseInt(a,10)-parseInt(b,10)},"float":function(a,b){return parseFloat(a)-parseFloat(b)},string:function(a,b){return a<b?-1:a>b?1:0}},j);d.on("click","th",function(){var m=d.children("tbody").children("tr"),b=a(this),k=0,f=a.fn.stupidtable.dir;d.find("th").slice(0,b.index()).each(function(){var b=a(this).attr("colspan")||1;k+=parseInt(b,10)});var h=b.data("sort-dir")===
f.ASC?f.DESC:f.ASC,n=h==f.DESC?b.data("sort-desc")||b.data("sort")||null:b.data("sort")||null;null!==n&&(d.trigger("beforetablesort",{column:k,direction:h}),d.css("display"),setTimeout(function(){var f=[],c=j[n];m.each(function(b,d){var c=a(d).children().eq(k),e=c.data("sort-value"),c="undefined"!==typeof e?e:c.text();f.push(c)});var l=f.slice(0).sort(c);h===a.fn.stupidtable.dir.DESC&&l.reverse();for(var c=[],g=0,e=0;e<f.length;e++){for(g=a.inArray(f[e],l);-1!=a.inArray(g,c);)g++;c.push(g)}d.find("th").data("sort-dir",
null).removeClass("sorting-desc sorting-asc");b.data("sort-dir",h).addClass("sorting-"+h);l=m.slice(0);for(e=g=0;e<c.length;e++)g=c[e],l[g]=m[e];c=a(l);d.children("tbody").append(c);d.trigger("aftertablesort",{column:k,direction:h});d.css("display")},10))})})};a.fn.stupidtable.dir={ASC:"asc",DESC:"desc"}})(jQuery);